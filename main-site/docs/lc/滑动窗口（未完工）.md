# 滑动窗口

## 什么时候能用滑窗？

灵神的[滑窗题单](https://leetcode.cn/discuss/post/3578981/ti-dan-hua-dong-chuang-kou-ding-chang-bu-rzz7/)将滑窗分为**定长**和**不定长（包括最长子数组、最短子数组、子数组个数）**，表面上是把滑窗题型分了类，其实从实战角度来讲，也把**什么题目能用滑窗**讲清楚了。

滑窗是滑动的窗口，具有 2 个使用条件：1.窗口内是连续的元素；2.窗口可以滑动，且只会往右滑。

注意，问题可能不会直接让我们处理原数组中连续的内容，但我们可以通过问题转化，或者借助辅助数组，满足“窗口内是连续的元素”这一条件。

接下来，我们会在具体的分类中检验这两个条件。

首先是定长滑窗。如果题目中规定了合法子数组（本文中我们把字符串、子串也称为数组、子数组）的长度`k`，那么显然，所有备选的子数组就是`[0, k-1], [1, k], [2, k+1], ..., [n-k, n-1]`。我们枚举右端点，`for (int right = 0; right < n; right++)`，之所以 `right`经过`[0, k-2]`这些因长度不合法的位置，是为了在枚举的同时访问该位置的元素，为节省对这些长度不够的子数组的进一步判断，我们只需要在判断前加一句“如果长度不合法，则跳过”就可以了。这样，我们就可以略去所谓的“初始化窗口”环节。如果不用滑窗，对每个备选的子数组，我们都要从它的左端点开始、到右端点结束，用`O(k)`的时间去统计，从而判断它是否合法。但我们观察到，每两个相邻的子数组，除了一头一尾，其余都是重叠的，这就代表维护统计内容是有意义的，维护了它，我们每次只要做`O(1)`即一头一尾的更新，就可以得到新子数组的统计内容。在定长滑窗问题中，搜索范围没有因滑窗的出现而发生改变，备选子数组就是那几个，滑窗只是用来加速统计的。

然后是不定长滑窗中的最长/最短子数组问题。不定长意味着题目不限定子数组的长度，也就意味着搜索范围扩大至任意子数组（或任意非空子数组。我们还是先思考枚举右端点这一行为，以位置`right`为右端点的非空子数组有`[0, right], [1, right], ..., [right, right]`，假如我们此前已经判断得到`[0, i]`不合法，且根据合法的条件，能推出`[0, right]`也不合法，我们就可以将位置`right`的搜索范围缩小至`[i + 1, right], [i + 2, right], ..., [right, right]`。这里的`i`其实就是我们维护的`left`的位置。在这种情况下，`left`和`right`都只经过每个位置各一次，因此总体时间是`O(n)`。但如果不能这么推，就意味着窗口的左端点会倒回（即往左移），也就超越了`O(n)`的复杂度了。

最后是不定长滑窗中的子数组个数（包括越长越合法、越短越合法）问题。[2537. 统计好子数组的数目](https://leetcode.cn/problems/count-the-number-of-good-subarrays/)

